(this["webpackJsonptodo-list-react"]=this["webpackJsonptodo-list-react"]||[]).push([[0],{127:function(t,e,n){"use strict";n.r(e);var c=n(1),o=n(0),a=n.n(o),r=n(26),s=n.n(r),i=(n(74),n(2)),u=n(63),d=n(18),l=n(23),p=n(27),j=Object(p.b)({name:"todos",initialState:{todos:[],filteredTodos:[]},reducers:{setTodo:function(t,e){t.todos.push(e.payload)},setAllTodos:function(t,e){t.todos=e.payload},changeTodoStatus:function(t,e){var n=t.todos.findIndex((function(t){return t._id===e.payload.changedTodo._id}));t.todos[n].isDone=e.payload.status},deleteTodo:function(t,e){var n=t.todos.findIndex((function(t){return t._id===e.payload}));t.todos.splice(n,1)},editTodo:function(t,e){var n=t.todos.findIndex((function(t){return t._id===e.payload._id}));t.todos.splice(n,1,e.payload)}}}),b=j.actions,f=b.setTodo,h=b.setAllTodos,O=b.changeTodoStatus,v=b.deleteTodo,x=b.editTodo,m=j.reducer,k=n(35),T=n(15),C=n(3),g=n.n(C),y=n(13),w=n(14),D=n.n(w),S="http://localhost:8080",N={getAllTodos:function(){var t=Object(y.a)(g.a.mark((function t(){var e,n=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t.next=3,D()({method:"get",url:"".concat(S,"/todo").concat(e)});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getTodo:function(){var t=Object(y.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"get",url:"".concat(S,"/todo/").concat(e)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateTodo:function(){var t=Object(y.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"put",url:"".concat(S,"/todo/edit/").concat(e),data:{value:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),saveTodo:function(){var t=Object(y.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"post",url:"".concat(S,"/todo"),headers:{"Content-Type":"application/json"},data:{isDone:e.isDone,value:e.value}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),allTodosHandler:function(){var t=Object(y.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"put",url:"".concat(S,"/todo/complete"),headers:{"Content-Type":"application/json"},data:{status:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),changeTodoStatus:function(){var t=Object(y.a)(g.a.mark((function t(e,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"put",url:"".concat(S,"/todo/complete/").concat(e),headers:{"Content-Type":"application/json"},data:{status:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),deleteComplete:function(){var t=Object(y.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"post",url:"".concat(S,"/todo/complete/clear")});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),deleteById:function(){var t=Object(y.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D()({method:"delete",url:"".concat(S,"/todo/delete/").concat(e)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function A(){var t=Object(u.a)(["\n  text-decoration: ","\n"]);return A=function(){return t},t}var _=function(t){var e=Object(o.useState)(""),n=Object(d.a)(e,2),a=n[0],r=n[1],s=Object(o.useState)(!1),u=Object(d.a)(s,2),p=u[0],j=u[1],b=Object(o.useState)(t.activeFilter),f=Object(d.a)(b,2),O=f[0],v=f[1],x=Object(i.f)(),m=Object(l.b)(),k=Object(l.c)((function(t){return t.todosSlice})).todos;Object(o.useEffect)((function(){N.getAllTodos().then((function(t){m(h(t.data))}))}),[]);var C=Object(o.useCallback)((function(t){t.preventDefault(),r(t.target.value)}),[]),g=Object(o.useCallback)((function(t){if("Enter"===t.key){var e={isDone:"completed"===O,value:a};N.saveTodo(e),r("")}}),[a]),y=Object(o.useCallback)((function(t){t.preventDefault();var e=t.target.checked;j(e),N.allTodosHandler(e)}),[k,p]),w=Object(o.useCallback)((function(t,e){t.preventDefault();var n=t.target.checked;N.changeTodoStatus(e._id,n)}),[k]),D=Object(o.useCallback)((function(t,e){t.preventDefault(),N.deleteById(e._id)}),[k]),S=Object(o.useCallback)((function(t){switch(v(t),t){case"all":N.getAllTodos().then((function(t){m(h(t.data))}));break;case"active":N.getAllTodos("?filter=active").then((function(t){m(h(t.data))}));break;case"completed":N.getAllTodos("?filter=completed").then((function(t){m(h(t.data))}))}}),[]),A=Object(o.useCallback)((function(t){N.deleteComplete()}),[k]),_=Object(o.useMemo)((function(){return k.filter((function(t){return t.isDone})).length}),[k]),F=Object(o.useCallback)((function(t){x.push("/todo/".concat(t._id,"/edit"))}),[]);return Object(c.jsxs)("div",{className:"app",children:[Object(c.jsxs)("div",{className:"",children:[Object(c.jsx)("input",{type:"checkbox",checked:p,onChange:y}),Object(c.jsx)("input",{type:"text",value:a,onChange:C,onKeyDown:g})]}),null===k||void 0===k?void 0:k.map((function(t){return Object(c.jsxs)("div",{className:"todo-list",children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:t.isDone,onChange:function(e){return w(e,t)}}),Object(c.jsx)(I,{isDone:t.isDone,children:t.value})]}),Object(c.jsx)("button",{onClick:function(e){return D(e,t)},children:"delete"}),Object(c.jsx)("button",{onClick:function(){return F(t)},children:"edit"}),"ID: ",Object(c.jsx)("span",{className:"todo-id",children:t._id})]},t._id)})),Object(c.jsxs)("div",{className:"todos-information",children:[Object(c.jsx)("div",{className:"",children:Object(c.jsxs)("span",{children:["Completed todos: ",_]})}),Object(c.jsxs)("div",{className:"todo-filter",children:[Object(c.jsx)(T.b,{activeClassName:"selected",to:"/",exact:!0,onClick:function(){return S("all")},children:"All"}),Object(c.jsx)(T.b,{activeClassName:"selected",to:"/active",exact:!0,onClick:function(){return S("active")},children:"Active"}),Object(c.jsx)(T.b,{activeClassName:"selected",to:"/completed",exact:!0,onClick:function(){return S("completed")},children:"Completed"})]}),_?Object(c.jsx)("button",{onClick:A,className:"delete-completed-todos",children:"Clear completed"}):null]})]})},I=k.a.span(A(),(function(t){return t.isDone?"line-through":null})),F=function(){var t=Object(i.g)().id,e=Object(o.useState)({}),n=Object(d.a)(e,2),a=n[0],r=n[1],s=Object(i.f)(),u=Object(o.useState)(""),l=Object(d.a)(u,2),p=l[0],j=l[1],b=Object(i.h)("/todo/:id/edit");Object(o.useEffect)((function(){N.getTodo(t).then((function(t){r(t.data),j(t.data.value)}))}),[]);var f=Object(o.useCallback)((function(t){j(t.target.value)}),[]),h=Object(o.useCallback)((function(e){N.updateTodo(t,p).then(s.push("/"))}),[p]);return Object(c.jsx)("div",{className:"single-todo-wrapper",children:b&&a?Object(c.jsxs)(c.Fragment,{children:["Edit task:",Object(c.jsx)("input",{type:"text",value:p,onChange:f}),Object(c.jsx)("button",{onClick:h,disabled:!p.length,children:"Save"})]}):a?Object(c.jsxs)("span",{children:["Task: ",p]}):Object(c.jsx)("div",{children:"Todo not Found"})})};var E=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{exact:!0,path:"/",children:Object(c.jsx)(_,{activeFilter:"all"})}),Object(c.jsx)(i.a,{exact:!0,path:"/active",children:Object(c.jsx)(_,{activeFilter:"active"})}),Object(c.jsx)(i.a,{exact:!0,path:"/completed",children:Object(c.jsx)(_,{activeFilter:"completed"})}),Object(c.jsx)(i.a,{exact:!0,path:"/todo/:id/edit",children:Object(c.jsx)(F,{})})]})})},B=n(5),H=Object(B.c)({todosSlice:m}),J=Object(p.a)({reducer:H}),M=n(68),K=Object(M.io)("http://localhost:8000");K.on("newTodoAdded",(function(t){J.dispatch(f(t))})),K.on("deletedTodo",(function(t){J.dispatch(v(t))})),K.on("allTodoComplete",(function(t){J.dispatch(h(t))})),K.on("singleTodoComplete",(function(t,e){J.dispatch(O({status:t,changedTodo:e}))})),K.on("deleteCompleted",(function(t){J.dispatch(h(t))})),K.on("editTodo",(function(t){J.dispatch(x(t))})),s.a.render(Object(c.jsx)(l.a,{store:J,children:Object(c.jsx)(T.a,{children:Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(E,{})})})}),document.getElementById("root"))},74:function(t,e,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.fd005079.chunk.js.map